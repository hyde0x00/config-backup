#!/bin/bash

if [ -z "$1" ]; then
  exit 1
fi

read -r line
if [ -z "$line" ]; then
  exit 1 # Nothing found
fi

result="$((echo "$line"; cat) | "$@")"
if [ -z "$result" ]; then
  exit 2 # Selection aborted
fi

echo "$result"
